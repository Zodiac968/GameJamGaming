[gd_scene load_steps=17 format=3 uid="uid://ctdwxj144rpo"]

[ext_resource type="Texture2D" uid="uid://bwr4xyruu16nb" path="res://Assets/prototype_512x512_blue1.png" id="1_r5cwd"]
[ext_resource type="Material" uid="uid://bf7o6d0rpyae1" path="res://Materials/Blocks.tres" id="2_60ceu"]
[ext_resource type="PackedScene" uid="uid://0oskmuh316ul" path="res://Scenes/mover.tscn" id="2_nx34h"]
[ext_resource type="Material" uid="uid://bxn4q3u3wojqg" path="res://Materials/Blocks_purple.tres" id="2_yn7lh"]
[ext_resource type="PackedScene" uid="uid://d2mxdf1u5y6ax" path="res://Scenes/laser_trigger.tscn" id="3_88hyy"]
[ext_resource type="PackedScene" uid="uid://b4grix04m32rx" path="res://Scenes/Player.tscn" id="3_ud66p"]
[ext_resource type="Material" uid="uid://dye71whyjiob1" path="res://Materials/ability.tres" id="4_3lawf"]
[ext_resource type="PackedScene" uid="uid://c0hderrk701md" path="res://Scenes/laser.tscn" id="7_77ij0"]
[ext_resource type="Script" uid="uid://degoe8e61wfgs" path="res://Scenes/fade_transition_sample.gd" id="7_qq80v"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_jx5go"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_t8f8m"]
sky_material = SubResource("ProceduralSkyMaterial_jx5go")

[sub_resource type="Environment" id="Environment_113vd"]
background_mode = 2
sky = SubResource("Sky_t8f8m")
tonemap_mode = 2
sdfgi_enabled = true
glow_enabled = true
fog_light_color = Color(1, 1, 1, 1)
fog_density = 0.003

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_eqjgg"]
albedo_texture = ExtResource("1_r5cwd")
uv1_triplanar = true
texture_filter = 2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_77ij0"]

[sub_resource type="SphereMesh" id="SphereMesh_3lawf"]
radius = 0.25
height = 0.5

[sub_resource type="SphereShape3D" id="SphereShape3D_3lawf"]
radius = 0.1855378

[node name="Node3D" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_113vd")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.942046, 0.2905377, -0.16774194, -1.14702e-08, 0.49999982, 0.8660255, 0.335484, 0.8158358, -0.4710228, -1.40096, 0.011759281, 0.246448)
shadow_enabled = true

[node name="World" type="CSGCombiner3D" parent="."]
use_collision = true

[node name="Ground" type="CSGBox3D" parent="World"]
use_collision = true
size = Vector3(1000, 1, 1000)
material = SubResource("StandardMaterial3D_eqjgg")

[node name="WhitePos1" type="Marker3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.3790133, 1.5327312, 8.736525)

[node name="WhitePos2" type="Marker3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.3790133, 4.4846554, 8.736525)

[node name="WhiteBlock" type="CSGBox3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.3790133, 1.5327312, 8.736525)
size = Vector3(1.7398796, 2.1379929, 1.0770874)
material = SubResource("StandardMaterial3D_77ij0")

[node name="Mover" parent="World/WhiteBlock" node_paths=PackedStringArray("pos1", "pos2", "object") instance=ExtResource("2_nx34h")]
pos1 = NodePath("../../WhitePos1")
pos2 = NodePath("../../WhitePos2")
object = NodePath("..")

[node name="LaserTrigger" parent="World" instance=ExtResource("3_88hyy")]
transform = Transform3D(-0.99996156, 0.008778982, 3.8373704e-10, 3.996803e-15, 4.37114e-08, -1, -0.008778982, -0.99996156, -4.3709715e-08, 4.152983, 1.2578907, 8.184173)

[node name="LaserRoot" parent="World" instance=ExtResource("7_77ij0")]
transform = Transform3D(-4.3711385e-08, 0.99999994, -4.371139e-08, 0, -4.3711385e-08, -1, -0.99999994, -4.3711385e-08, 1.9106855e-15, 7.711857, 1.2578907, 3.4705162)

[node name="Wall with hole" type="CSGCombiner3D" parent="World"]

[node name="CSGBox3D6" type="CSGBox3D" parent="World/Wall with hole"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.4136467, 4.51178, 8.840939)
size = Vector3(30.560059, 8.02356, 1.2832031)
material = ExtResource("2_60ceu")

[node name="CSGCombiner3D" type="CSGCombiner3D" parent="World/Wall with hole"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1.995, 0, 2.1131973, 8.656586)
operation = 2

[node name="CSGBox3D6" type="CSGBox3D" parent="World/Wall with hole/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.37548828, -0.55407715, 0.007323265)
size = Vector3(1.7509766, 2.1081543, 0.98535156)
material = ExtResource("2_60ceu")

[node name="Level1" type="CSGCombiner3D" parent="World"]

[node name="CSGBox3D" type="CSGBox3D" parent="World/Level1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.017, 6, -13.075918)
size = Vector3(6, 1, 6)
material = ExtResource("2_yn7lh")

[node name="CSGBox3D2" type="CSGBox3D" parent="World/Level1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.894279, 4.0000005, -5.1941066)
material = ExtResource("2_60ceu")

[node name="CSGBox3D3" type="CSGBox3D" parent="World/Level1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.9716506, 2.5, -3.767953)
size = Vector3(3.13385, 1, 1)
material = ExtResource("2_60ceu")

[node name="CSGBox3D4" type="CSGBox3D" parent="World/Level1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.826, 1, -2.322)
material = ExtResource("2_60ceu")

[node name="CSGBox3D5" type="CSGBox3D" parent="World/Level1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.6162806, 5, -6.801598)
size = Vector3(4.8985596, 1, 1)
material = ExtResource("2_60ceu")

[node name="CSGBox3D7" type="CSGBox3D" parent="World/Level1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.58393395, 5, -8.641071)
material = ExtResource("2_60ceu")

[node name="Player" parent="." instance=ExtResource("3_ud66p")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.0456395, 1.0758696, -1.3304806)
SPEED = 2.0
move_lerp = 5
rot_lerp = 7
jumpHeight = 1.5
jumpDistance = 2.0
smJumpHeight = 0.75
smJumpDistance = 2.0
glidingRate = -0.5

[node name="Control" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 1920.0
offset_bottom = 1080.0
mouse_filter = 1

[node name="FadeTransition" type="ColorRect" parent="Control"]
visible = false
layout_mode = 0
offset_right = 1920.0
offset_bottom = 1080.0
color = Color(0, 0, 0, 1)
script = ExtResource("7_qq80v")

[node name="ColorRect" type="ColorRect" parent="Control"]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 9.0
offset_top = -212.0
offset_right = 651.0
offset_bottom = -32.0
grow_vertical = 0
color = Color(0, 0, 0, 0.368627)

[node name="RichTextLabel" type="RichTextLabel" parent="Control/ColorRect"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/normal_font_size = 25
text = "Controls:
WASD - Move			Space - Jump/Hover(Hold)
1,2,3 - Selecting Mutation
I - Activate selected mutation
K - Deactivate selected mutation"

[node name="Ability1" type="Area3D" parent="." groups=["ability"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.03907609, 6.937812, -14.234759)

[node name="Sphere" type="MeshInstance3D" parent="Ability1"]
material_override = ExtResource("4_3lawf")
mesh = SubResource("SphereMesh_3lawf")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Ability1"]
shape = SubResource("SphereShape3D_3lawf")

[connection signal="laser_triggered" from="World/LaserTrigger" to="World/WhiteBlock/Mover" method="enableMovement"]
[connection signal="body_entered" from="Ability1" to="Player" method="enableAb1"]
